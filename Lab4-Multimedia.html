<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Webcam Snapshot with Replace</title>
    <script src="p5.min.js"></script>
  </head>
  <body>
    <script>
      let capture;
      let snapshotButton;
      let currentSnapshot; // Will store the current image element

      function setup() {
        noCanvas(); // No canvas needed

        // Start webcam capture
        capture = createCapture(VIDEO);
        capture.size(320, 240);
        capture.position(20, 20);

        // Create "Take Snapshot" button
        snapshotButton = createButton('ðŸ“¸ Take Snapshot');
        snapshotButton.position(20, 280);
        snapshotButton.mousePressed(takeSnapshot);
      }

      function takeSnapshot() {
        // Remove the old snapshot if it exists
        if (currentSnapshot) {
          currentSnapshot.remove();
        }

        // Capture current webcam frame
        let tempCanvas = createGraphics(320, 240);
        tempCanvas.image(capture, 0, 0, 320, 240);

        // Convert frame to image data
        let dataURL = tempCanvas.elt.toDataURL();

        // Create a new image and keep reference to it
        currentSnapshot = createImg(dataURL, 'Snapshot');
        currentSnapshot.size(160, 120);
        currentSnapshot.position(360, 20);
      }
    </script>
  </body>
</html>